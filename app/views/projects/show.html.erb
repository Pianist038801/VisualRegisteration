<div class="dashhead">
  <%= render partial: "partial/header", locals: { header: "Projects" } %>
  <div class="dashhead-toolbar">
    <%= link_to '<i class="fa fa-plus"></i> New'.html_safe, '', data: {toggle: 'modal', target: '#new_project', 'new-project-url': new_project_path}, class: "btn btn-primary", title: "New" %>
    <%= link_to '<i class="fa fa-plus"></i> Edit'.html_safe, '', data: {toggle: 'modal', target: '#edit_project', 'edit-project-url': edit_project_path(@project.id)}, class: "btn btn-primary", title: "Edit" %>
    <a href="<%= projects_path %>" class="btn btn-primary">Back</a>
  </div>
</div>
<hr class="m-t">


<div class="row">
  <div class="col-md-12">
    <dl class="dl-horizontal">
      <dt>Name:</dt>
      <dd><%= @project.name %>
      <dt>Reference Number:</dt>
      <dd><%= @project.reference_number %>
      <dt>Customer:</dt>
      <dd><%= link_to @project.customer, @project.customer %>
      <dt>Tasks:</dt>
      <dd><%= @project.tasks.pluck(:name).to_sentence %>
      <dt>Items:</dt>
      <dd><%= @project.items  .pluck(:name).to_sentence %>
    </dd>
  </div>
</div>

<div id="new_project" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content"></div>
  </div>
</div>

<div id="edit_project" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content"></div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $('#new_project').on('show.bs.modal', function(e) {
      var path = $(e.relatedTarget).data('new-project-url');
      $("#new_project .modal-content").load(path);
    })
  });
  $(document).ready(function(){
    $('#edit_project').on('show.bs.modal', function(e) {
      var path = $(e.relatedTarget).data('edit-project-url');
      $("#edit_project .modal-content").load(path);
    })
  });
</script>